
<html>
<head>
    <link rel="stylesheet" href="css/style.css">
    <div class="vertical-menu">
        <a href="Home.html" >Entries</a>
        <a href="Calendar.html" class="active">Calendar</a>
        <a href="Maps.html">Maps</a>
    </div>

    <title>Calendar</title>
    <script>
        "use strict";

        function pageLoad() {
            console.log("Invoked pageLoad() ");
            getUserName();

        }

        function getUserName(){
            console.log("Invoked getUserName")
            const url = "/user/username";
            fetch(url, {
                method : "GET",
            }).then(response=> {
                return response.json();
            }).then(response=> {
                if (response.hasOwnProperty("Error")){
                    alert(JSON.stringify(response));
                } else{
                    document.getElementById("name").innerHTML = response;
                }
            });
        }

        function getEventList() {
            var x = document.getElementById("myDIV");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
            console.log("Invoked getEventList()");

            const url = "/event/list";
            fetch(url, {
                method: "GET",
            }).then(response => {
                return response.json();
        }).then(response => {
                if (response.hasOwnProperty("Error")) {
                alert(JSON.stringify(response));
            } else {
                formatEventList(response);
            }
        });
        }
        function formatEventList(response){
            let dataHTML = "<th> ID </th><th> Title</th><th> Description</th><th> Location</th><th> Date</th>";

            for (let item of response) {

                dataHTML += "<tr><td>" + item.EntryID + "</td><td>" + item.Title + "</td><td>" + item.Description + "</td><td>" + item.Location + "</td><td>" + item.Date + "</td></tr>";
            }
            document.getElementById("eventTable").innerHTML += dataHTML;


        }

    </script>


</head>
<body onload="pageLoad()">

<h1>Calendar</h1>
<div id ="name">
    <p>*username goes here*</p>
</div>
<hr>
<div id="myDIV">
    <BR>
    <button onclick='getEventList();'>Display Events</button>
</div>
<BR>
<BR>
<table id="eventTable">

</table>
<BR>
<BR>
<button onclick="document.location='createEvent.html'">Create Entry</button>
</body>
</html>